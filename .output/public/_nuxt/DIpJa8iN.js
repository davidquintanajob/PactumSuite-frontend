import{_ as j,U as D,M as x,r as S,k as f,y as a,z as t,A as n,F as u,O as k,P as v,G as $,B as c,H as w,R as E,J as M,I as L,a1 as B,n as q}from"#entry";const K={class:"overflow-x-auto"},O={class:"min-w-full bg-white rounded-lg overflow-hidden"},W={class:"bg-gray-50"},F={key:0,class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},U={class:"divide-y divide-gray-200"},G={key:0},J=["colspan"],Q=["onClick","onKeydown"],X={key:0,class:"relative pr-6"},Y=["title"],Z={key:1,class:"flex items-center"},ee={class:"flex-shrink-0 mr-3 relative w-10 h-10"},te=["src","alt","onLoad","onError"],se={key:0,class:"absolute inset-0 flex items-center justify-center bg-white/60 rounded-full"},ae={class:"min-w-0"},re=["innerHTML"],ne={key:1,class:"truncate block"},oe={key:2},ie=["innerHTML"],le={key:1},de={key:1},ce=["innerHTML"],ue={key:1},ye={key:0,class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},he={class:"flex justify-end space-x-2"},ge=["onClick","title"],pe={key:1},fe=["onClick","title"],ke={key:1},ve={key:2},xe=["colspan"],we={class:"flex justify-between items-center mt-4"},be={class:"text-sm text-gray-700"},me={class:"flex gap-2"},_e=["disabled"],Pe={class:"px-3 py-1 text-gray-700"},Ce=["disabled"],Me={__name:"DataTable",props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},actions:{type:Array,default:()=>[]},totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:10},currentPage:{type:Number,required:!0},isLoading:{type:Boolean,default:!1},isShowPhotos:{type:Boolean,default:!1}},emits:["page-change"],setup(i,{emit:H}){const l=i,I=H,A=q(),h=D({});function N(r){return typeof r=="string"&&r.startsWith("http")}x(()=>l.items,r=>{Array.isArray(r)&&r.forEach((o,s)=>{const y=b(o);h[s]=N(y)})},{immediate:!0,deep:!0});function b(r){const o=r&&(r.foto||r.imagen||r.image)?r.foto||r.imagen||r.image:null;return o?typeof o=="string"&&(o.startsWith("http")||o.startsWith("data:"))?o:`${A.public.backendHost}${o}`:m()}function m(){return"/image.png"}S(l.itemsPerPage);const g=f(()=>Math.ceil(l.totalItems/l.itemsPerPage)),_=f(()=>(l.currentPage-1)*l.itemsPerPage),R=f(()=>{const r=_.value+l.itemsPerPage;return Math.min(r,l.totalItems)}),P=f(()=>l.items);function d(r,o){return!r||!o?"":o.split(".").reduce((s,y)=>s&&s[y],r)??""}const C=r=>{r>=1&&r<=g.value&&I("page-change",r)},z=()=>{l.currentPage>1&&C(l.currentPage-1)},T=()=>{l.currentPage<g.value&&C(l.currentPage+1)};return x(()=>l.items,r=>{},{deep:!0}),x(()=>l.currentPage,r=>{console.log("Página actualizada:",r)}),(r,o)=>(t(),a("div",null,[n("div",K,[n("table",O,[n("thead",W,[n("tr",null,[(t(!0),a(k,null,v(i.columns,s=>(t(),a("th",{key:s.key,class:w(["px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",s.class])},c(s.label),3))),128)),i.actions?(t(),a("th",F," Acciones ")):u("",!0)])]),n("tbody",U,[i.isLoading?(t(),a("tr",G,[n("td",{colspan:i.columns.length+(i.actions?1:0),class:"px-6 py-4 text-center"},[...o[0]||(o[0]=[$('<div class="flex justify-center items-center" data-v-4957e8d3><svg class="animate-spin h-5 w-5 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-4957e8d3><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-4957e8d3></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-4957e8d3></path></svg><span class="ml-2" data-v-4957e8d3>Cargando datos...</span></div>',1)])],8,J)])):(t(!0),a(k,{key:1},v(P.value,(s,y)=>(t(),a("tr",{key:y,class:"hover:bg-gray-50",tabindex:"0",onClick:()=>r.$emit("row-click",s),onKeydown:E(()=>r.$emit("row-click",s),["enter"])},[(t(!0),a(k,null,v(i.columns,(e,p)=>(t(),a("td",{key:e.key,class:w(["px-6 py-4 text-sm text-gray-900",e.class||(p===0?"whitespace-normal max-w-xs break-words":"whitespace-nowrap")])},[p===0?(t(),a("div",X,[d(s,"nota")?(t(),a("div",{key:0,class:"absolute right-0 top-1/2 transform -translate-y-1/2 z-50 pointer-events-none",title:d(s,"nota")},[...o[1]||(o[1]=[n("div",{class:"bg-info text-neutral p-1 rounded-full shadow-lg flex items-center justify-center w-6 h-6",role:"img","aria-label":"Nota disponible"},[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6M7 7h10l2 2v8a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2z"})])],-1)])],8,Y)):u("",!0),l.isShowPhotos?(t(),a("div",Z,[n("div",ee,[n("img",{src:b(s),alt:d(s,e.key)||"foto",class:"w-10 h-10 rounded-full object-cover border bg-white",onLoad:()=>{h[y]=!1},onError:V=>{V.target.src=m(),h[y]=!1}},null,40,te),h[y]?(t(),a("div",se,[...o[2]||(o[2]=[n("svg",{class:"animate-spin h-5 w-5 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)])])):u("",!0)]),n("div",ae,[e.cellRenderer?(t(),a("div",{key:0,innerHTML:e.cellRenderer(d(s,e.key),s)},null,8,re)):(t(),a("span",ne,c(e.format?e.format(d(s,e.key)):d(s,e.key)),1))])])):(t(),a("div",oe,[e.cellRenderer?(t(),a("div",{key:0,innerHTML:e.cellRenderer(d(s,e.key),s)},null,8,ie)):(t(),a("span",le,c(e.format?e.format(d(s,e.key)):d(s,e.key)),1))]))])):(t(),a("div",de,[e.cellRenderer?(t(),a("div",{key:0,innerHTML:e.cellRenderer(d(s,e.key),s)},null,8,ce)):(t(),a("span",ue,c(e.format?e.format(d(s,e.key)):d(s,e.key)),1))]))],2))),128)),i.actions?(t(),a("td",ye,[n("div",he,[(t(!0),a(k,null,v(i.actions,e=>(t(),a("div",{key:e.name},[e.buttonClass?(t(),a("button",{key:0,onClick:M(p=>e.handler(s),["stop"]),class:w(e.buttonClass+" flex items-center gap-2"),title:e.name},[e.icon?(t(),L(B(e.icon),{key:0,class:"h-5 w-5"})):u("",!0),e.iconOnly?u("",!0):(t(),a("span",pe,c(e.name),1))],10,ge)):(t(),a("button",{key:1,onClick:M(p=>e.handler(s),["stop"]),class:"text-primary hover:brightness-90 flex items-center gap-1",title:e.name},[e.icon?(t(),L(B(e.icon),{key:0,class:"h-5 w-5"})):u("",!0),e.iconOnly?u("",!0):(t(),a("span",ke,c(e.name),1))],8,fe))]))),128))])])):u("",!0)],40,Q))),128)),!i.isLoading&&P.value.length===0?(t(),a("tr",ve,[n("td",{colspan:i.columns.length+(i.actions?1:0),class:"px-6 py-4 text-center text-sm text-gray-500"}," No hay datos disponibles ",8,xe)])):u("",!0)])])]),n("div",we,[n("div",be," Mostrando "+c(_.value+1)+" - "+c(R.value)+" de "+c(i.totalItems)+" elementos ",1),n("div",me,[n("button",{onClick:z,disabled:i.currentPage===1,class:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Anterior ",8,_e),n("span",Pe," Página "+c(i.currentPage)+" de "+c(g.value),1),n("button",{onClick:T,disabled:i.currentPage>=g.value,class:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Siguiente ",8,Ce)])])]))}},Be=j(Me,[["__scopeId","data-v-4957e8d3"]]);export{Be as D};
