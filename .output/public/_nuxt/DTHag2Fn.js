import{Q as L,_ as J,r as m,k as q,o as G,N as K,y as s,z as a,A as t,H as N,X as j,F as z,J as u,O,P as U,B as P,E as B,q as p}from"#entry";import{s as Q}from"./BzLCLO6P.js";const R=L("/usuario.png"),Y=L("/perfil.png"),W=L("/cerrar-sesion.png"),Z={class:"flex items-center justify-center w-8 h-16"},ee=["d"],te={class:"container mx-auto flex justify-between items-center py-4 px-6 md:flex-col md:items-start md:justify-start md:py-6 md:h-full"},re={class:"hidden md:flex md:items-center relative"},oe={class:"relative flex flex-col items-center justify-center"},le={key:0,class:"absolute left-1/2 top-full mt-0.5 -translate-x-1/2 px-2 py-0.5 rounded-full text-xs bg-success text-neutral shadow z-10"},ne={key:1,class:"absolute left-1/2 top-full mt-0.5 -translate-x-1/2 px-2 py-0.5 rounded-full text-xs bg-danger text-neutral shadow z-10"},se={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ae={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ie={class:"relative w-full h-full flex items-center justify-center"},ce={key:0,class:"absolute left-1/2 top-full mt-0.5 -translate-x-1/2 px-2 py-0.5 rounded-full text-xs bg-green-500 text-white shadow z-10"},de={key:1,class:"absolute left-1/2 top-full mt-0.5 -translate-x-1/2 px-2 py-0.5 rounded-full text-xs bg-red-500 text-white shadow z-10"},ue={class:"hidden md:flex flex-col w-full md:mt-4 overflow-y-auto",style:{"max-height":"calc(100vh - 200px)"}},ve={class:"flex flex-col space-y-4 w-full"},fe=["onClick"],me=["src"],pe={class:"text-[15px]"},he={key:1,class:"md:hidden fixed top-16 left-0 w-full bg-secondary p-4 space-y-2 transform transition-all duration-300 ease-in-out z-50 overflow-auto"},ge=["onClick"],xe=["src"],be=1e4,we={__name:"Navbar",setup(ke){const c=m(null),r=m(!0),i=m(!1),d=m(!1),y=m(!1),C=m(!1);let x=null;const D=()=>{r.value=!r.value,r.value?g():A()},v=[{label:"Entidades",src:"/edificios.png",link:"/entidades",roles:["Administrador","Comercial","Invitado"]},{label:"Contratos",src:"/contrato.png",link:"/contratos",roles:["Administrador","Comercial","Invitado"]},{label:"Trabajadores",src:"/lanza-libre.png",link:"/trabajadores",roles:["Administrador","Comercial","Invitado"]},{label:"Productos",src:"/Productos.png",link:"/productos",roles:["Administrador","Comercial","Invitado","Vendedor"]},{label:"Ventas",src:"/carritoDeCompras.png",link:"/ventas",roles:["Administrador","Comercial","Invitado","Vendedor"]},{label:"Entradas",src:"/agregar-producto.png",link:"/entradas",roles:["Administrador","Comercial","Invitado"]},{label:"Retiros de Ganancia",src:"/retiro-de-dinero.png",link:"/retiros",roles:["Administrador","Comercial"]},{label:"Salidas",src:"/ventas.png",link:"/salidas",roles:["Administrador","Comercial","Invitado","Vendedor"]},{label:"Facturas",src:"/Facturas.png",link:"/facturas",roles:["Administrador","Comercial","Invitado"]},{label:"Servicios",src:"/Servicios.png",link:"/servicios",roles:["Administrador","Comercial","Invitado"]},{label:"Tipos de Contratos",src:"/firmar.png",link:"/tipos-contratos",roles:["Administrador","Comercial"]},{label:"Usuario",src:"/usuarios.png",link:"/usuarios",roles:["Administrador"]},{label:"Informes",src:"/bar-chart.png",link:"/informes",roles:["Administrador","Comercial","Invitado"]},{label:"Configuración",src:"/analitica.png",link:"/config",roles:["Administrador"]}],E=["Administrador","Comercial","Invitado","Vendedor"];for(let o=0;o<v.length;o++){const e=v[o];(!e||!e.roles||!Array.isArray(e.roles))&&(v[o]={...e,roles:E})}const F=()=>{i.value=!i.value,i.value?A():g()};function M(){p("/")}function X(){localStorage.clear(),window.location.pathname==="/"?window.location.reload():p("/")}function _(){localStorage.getItem("usuario")?p("/perfil"):p("/login")}function T(o){const e=localStorage.getItem("token");r.value=!0,g(),e?p(o):p("/login")}const $=(o,e=-1)=>{try{const l=localStorage.getItem("usuario");if(!l)return!0;if(!o)return console.warn("[Navbar] isOptionVisible called with undefined option — hiding by default"),!1;const n=JSON.parse(l),k=n&&(n.rol||n.role||n.perfil||n.profile)?n.rol||n.role||n.perfil&&n.perfil.rol||n.profile&&n.profile.role:null;if(!k)return!0;const H=String(k).trim().toLowerCase();let I;return!o.roles||!Array.isArray(o.roles)?I=E.map(S=>String(S).trim().toLowerCase()):I=o.roles.map(S=>String(S).trim().toLowerCase()),I.includes(H)}catch(l){return console.warn("isOptionVisible error parsing usuario from localStorage",l),!0}},V=q(()=>{try{return Array.isArray(v)?v.filter((o,e)=>$(o,e)):[]}catch(o){return console.warn("visibleOptions compute error",o),v||[]}});G(()=>{localStorage.getItem("hasVisitedNavbar")||(r.value=!1,localStorage.setItem("hasVisitedNavbar","true")),y.value=!!localStorage.getItem("token"),f=e=>{if(!c.value)return;const l=e.target||e;c.value.contains(l)||(r.value||(r.value=!0),i.value&&(i.value=!1),d.value&&(d.value=!1))},b=e=>{(e.key==="Escape"||e.key==="Esc")&&(r.value||(r.value=!0),i.value&&(i.value=!1),d.value&&(d.value=!1))},document.addEventListener("click",f),document.addEventListener("touchstart",f),document.addEventListener("keydown",b),c.value&&c.value.addEventListener&&(c.value.addEventListener("click",w),c.value.addEventListener("touchstart",w)),x=Q(()=>{r.value&&(C.value=!0,setTimeout(()=>{C.value=!1},1200))},5e3)});let f=null,b=null,h=null;function g(){h&&(clearTimeout(h),h=null)}function A(){g(),(!r.value||i.value||d.value)&&(h=setTimeout(()=>{r.value=!0,i.value=!1,d.value=!1,h=null},be))}function w(){(!r.value||i.value||d.value)&&A()}return K(()=>{f&&(document.removeEventListener("click",f),document.removeEventListener("touchstart",f)),b&&document.removeEventListener("keydown",b),c.value&&c.value.removeEventListener&&(c.value.removeEventListener("click",w),c.value.removeEventListener("touchstart",w)),g(),x&&(clearInterval(x),x=null)}),(o,e)=>(a(),s("div",{class:"relative",ref_key:"navRoot",ref:c},[t("button",{onClick:D,class:"hidden md:flex items-center fixed z-50 bg-accent text-white rounded-r-full h-16 pr-4 shadow-lg hover:bg-accent-dark transition-all duration-300 ease-in-out",style:j({left:r.value?"0px":"255px",right:"auto",width:(r.value,"auto"),top:"200px"})},[t("div",Z,[(a(),s("svg",{xmlns:"http://www.w3.org/2000/svg",class:N(["h-5 w-5",C.value?"chevron-wobble":""]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:r.value?"M13 5l7 7-7 7":"M11 19l-7-7 7-7"},null,8,ee)],2))])],4),t("nav",{class:N(["fixed top-0 left-0 w-full bg-gradient-to-r from-primary to-secondary shadow-lg z-40 md:w-64 md:h-screen md:bg-gradient-to-b transition-all duration-300 ease-in-out",{"md:transform md:-translate-x-full":r.value}]),style:{"--nav-width":"16rem"}},[t("div",te,[t("div",re,[t("h1",{onClick:M,class:"text-white text-3xl md:text-4xl font-sans font-bold tracking-tight mr-4 cursor-pointer select-none"}," PACTUM "),t("div",oe,[t("a",{onClick:_,class:"w-12 h-12 rounded-full overflow-hidden border-2 border-white hover:bg-accent hover:border-accent transition flex items-center justify-center cursor-pointer"},[...e[2]||(e[2]=[t("img",{src:R,alt:"Usuario",class:"w-3/4 h-3/4 object-cover transition duration-300 hover:opacity-75 mix-blend-screen invert hover:invert(0)"},null,-1)])]),y.value?(a(),s("span",le,"Conectado")):(a(),s("span",ne,"Desconectado"))])]),t("h1",{onClick:M,class:"text-white text-3xl font-sans font-bold tracking-tight md:hidden cursor-pointer select-none",role:"button",tabindex:"0"}," PACTUM "),t("button",{onClick:u(F,["stop"]),class:"md:hidden text-white focus:outline-none transition duration-300"},[i.value?(a(),s("svg",ae,[...e[4]||(e[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(a(),s("svg",se,[...e[3]||(e[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1)])]))]),t("a",{onClick:u(_,["stop"]),class:"w-12 h-12 rounded-full overflow-hidden border-2 border-white hover:bg-accent hover:border-accent transition ml-6 flex items-center justify-center cursor-pointer md:hidden"},[t("div",ie,[e[5]||(e[5]=t("img",{src:R,alt:"Usuario",class:"w-3/4 h-3/4 object-cover transition duration-300 hover:opacity-75 mix-blend-screen invert hover:invert(0)"},null,-1)),y.value?(a(),s("span",ce,"Conectado")):(a(),s("span",de,"Desconectado"))])]),t("div",ue,[t("div",ve,[(a(!0),s(O,null,U(V.value,(l,n)=>(a(),s("a",{key:n,href:"#",class:"text-white flex items-center px-4 py-3 rounded-lg border border-white transition group hover:bg-accent hover:text-black",onClick:u(k=>{T(l.link),r.value=!0},["prevent"])},[t("img",{src:l.src,alt:"",class:"w-6 h-6 mr-2 invert group-hover:invert-0 transition-all duration-300"},null,8,me),t("span",pe,P(l.label),1)],8,fe))),128))])])]),d.value?(a(),s("div",{key:0,class:"fixed inset-0 z-50",onClick:e[1]||(e[1]=l=>d.value=!1)},[t("div",{class:"fixed top-0 right-0 w-64 h-screen bg-secondary p-4 space-y-2 transform transition-all duration-300 ease-in-out z-50",style:j({transform:d.value?"translateX(0)":"translateX(100%)"}),onClick:e[0]||(e[0]=u(()=>{},["stop"]))},[t("a",{href:"/perfil",class:"group flex items-center text-white py-2 rounded-lg hover:bg-accent transition group-hover:text-black",onClick:u(_,["prevent"])},[...e[6]||(e[6]=[t("img",{src:Y,alt:"Perfil",class:"w-6 h-6 mr-2 invert group-hover:invert-0 transition-all duration-300"},null,-1),B(" Mi Perfil ",-1)])]),e[8]||(e[8]=t("hr",{class:"border-white"},null,-1)),t("a",{href:"/cerrar-sesion",class:"group flex items-center text-white py-2 rounded-lg hover:bg-accent transition group-hover:text-black",onClick:u(X,["prevent"])},[...e[7]||(e[7]=[t("img",{src:W,alt:"Cerrar Sesión",class:"w-6 h-6 mr-2 invert group-hover:invert-0 transition-all duration-300"},null,-1),B(" Cerrar Sesión ",-1)])])],4)])):z("",!0),i.value?(a(),s("div",he,[(a(!0),s(O,null,U(V.value,(l,n)=>(a(),s("a",{key:n,href:"#",class:"flex items-center block text-white text-center py-2 rounded-lg transition group hover:bg-accent",onClick:u(k=>{T(l.link),i.value=!1},["prevent"])},[t("img",{src:l.src,alt:"",class:"w-6 h-6 mr-2 invert group-hover:invert-0 transition-all duration-300"},null,8,xe),t("span",null,P(l.label),1)],8,ge))),128))])):z("",!0)],2)],512))}},Ae=J(we,[["__scopeId","data-v-9e2e369d"]]);export{Ae as N};
