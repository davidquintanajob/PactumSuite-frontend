import{_ as A,r as B,k as h,J as w,x as s,y as t,z as r,E as c,K as p,L as k,a1 as V,A as i,I as v,Q as H,F as _,U as P,V as C}from"./DLx_sSSf.js";const T={class:"overflow-x-auto"},D={class:"min-w-full bg-white rounded-lg overflow-hidden"},j={class:"bg-gray-50"},q={key:0,class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},K={class:"divide-y divide-gray-200"},R={key:0},$=["colspan"],E=["onClick","onKeydown"],S={key:0,class:"relative pr-6"},F=["title"],O=["innerHTML"],J={key:2},Q={key:1},U=["innerHTML"],G={key:1},W={key:0,class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},X={class:"flex justify-end space-x-2"},Y=["onClick","title"],Z={key:1},ee=["onClick","title"],te={key:1},se={key:2},ae=["colspan"],re={class:"flex justify-between items-center mt-4"},ne={class:"text-sm text-gray-700"},oe={class:"flex gap-2"},le=["disabled"],ie={class:"px-3 py-1 text-gray-700"},de=["disabled"],ce={__name:"DataTable",props:{columns:{type:Array,required:!0},items:{type:Array,required:!0},actions:{type:Array,default:()=>[]},totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:10},currentPage:{type:Number,required:!0},isLoading:{type:Boolean,default:!1}},emits:["page-change"],setup(n,{emit:M}){const o=n,I=M;B(o.itemsPerPage);const y=h(()=>Math.ceil(o.totalItems/o.itemsPerPage)),x=h(()=>(o.currentPage-1)*o.itemsPerPage),L=h(()=>{const l=x.value+o.itemsPerPage;return Math.min(l,o.totalItems)}),m=h(()=>o.items);function d(l,u){return!l||!u?"":u.split(".").reduce((a,b)=>a&&a[b],l)??""}const f=l=>{l>=1&&l<=y.value&&I("page-change",l)},N=()=>{o.currentPage>1&&f(o.currentPage-1)},z=()=>{o.currentPage<y.value&&f(o.currentPage+1)};return w(()=>o.items,l=>{},{deep:!0}),w(()=>o.currentPage,l=>{console.log("Página actualizada:",l)}),(l,u)=>(t(),s("div",null,[r("div",T,[r("table",D,[r("thead",j,[r("tr",null,[(t(!0),s(p,null,k(n.columns,a=>(t(),s("th",{key:a.key,class:v(["px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",a.class])},i(a.label),3))),128)),n.actions?(t(),s("th",q," Acciones ")):c("",!0)])]),r("tbody",K,[n.isLoading?(t(),s("tr",R,[r("td",{colspan:n.columns.length+(n.actions?1:0),class:"px-6 py-4 text-center"},[...u[0]||(u[0]=[V('<div class="flex justify-center items-center" data-v-bb510099><svg class="animate-spin h-5 w-5 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-bb510099><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-bb510099></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-bb510099></path></svg><span class="ml-2" data-v-bb510099>Cargando datos...</span></div>',1)])],8,$)])):(t(!0),s(p,{key:1},k(m.value,(a,b)=>(t(),s("tr",{key:b,class:"hover:bg-gray-50",tabindex:"0",onClick:()=>l.$emit("row-click",a),onKeydown:H(()=>l.$emit("row-click",a),["enter"])},[(t(!0),s(p,null,k(n.columns,(e,g)=>(t(),s("td",{key:e.key,class:v(["px-6 py-4 text-sm text-gray-900",e.class||(g===0?"whitespace-normal max-w-xs break-words":"whitespace-nowrap")])},[g===0?(t(),s("div",S,[d(a,"nota")?(t(),s("div",{key:0,class:"absolute right-0 top-1/2 transform -translate-y-1/2 z-50 pointer-events-none",title:d(a,"nota")},[...u[1]||(u[1]=[r("div",{class:"bg-info text-neutral p-1 rounded-full shadow-lg flex items-center justify-center w-6 h-6",role:"img","aria-label":"Nota disponible"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6M7 7h10l2 2v8a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2z"})])],-1)])],8,F)):c("",!0),e.cellRenderer?(t(),s("div",{key:1,innerHTML:e.cellRenderer(d(a,e.key),a)},null,8,O)):(t(),s("span",J,i(e.format?e.format(d(a,e.key)):d(a,e.key)),1))])):(t(),s("div",Q,[e.cellRenderer?(t(),s("div",{key:0,innerHTML:e.cellRenderer(d(a,e.key),a)},null,8,U)):(t(),s("span",G,i(e.format?e.format(d(a,e.key)):d(a,e.key)),1))]))],2))),128)),n.actions?(t(),s("td",W,[r("div",X,[(t(!0),s(p,null,k(n.actions,e=>(t(),s("div",{key:e.name},[e.buttonClass?(t(),s("button",{key:0,onClick:_(g=>e.handler(a),["stop"]),class:v(e.buttonClass+" flex items-center gap-2"),title:e.name},[e.icon?(t(),P(C(e.icon),{key:0,class:"h-5 w-5"})):c("",!0),e.iconOnly?c("",!0):(t(),s("span",Z,i(e.name),1))],10,Y)):(t(),s("button",{key:1,onClick:_(g=>e.handler(a),["stop"]),class:"text-primary hover:brightness-90 flex items-center gap-1",title:e.name},[e.icon?(t(),P(C(e.icon),{key:0,class:"h-5 w-5"})):c("",!0),e.iconOnly?c("",!0):(t(),s("span",te,i(e.name),1))],8,ee))]))),128))])])):c("",!0)],40,E))),128)),!n.isLoading&&m.value.length===0?(t(),s("tr",se,[r("td",{colspan:n.columns.length+(n.actions?1:0),class:"px-6 py-4 text-center text-sm text-gray-500"}," No hay datos disponibles ",8,ae)])):c("",!0)])])]),r("div",re,[r("div",ne," Mostrando "+i(x.value+1)+" - "+i(L.value)+" de "+i(n.totalItems)+" elementos ",1),r("div",oe,[r("button",{onClick:N,disabled:n.currentPage===1,class:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Anterior ",8,le),r("span",ie," Página "+i(n.currentPage)+" de "+i(y.value),1),r("button",{onClick:z,disabled:n.currentPage>=y.value,class:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Siguiente ",8,de)])])]))}},ye=A(ce,[["__scopeId","data-v-bb510099"]]);export{ye as D};
