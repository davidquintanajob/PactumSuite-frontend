import{r as l,x as i,B as p,z as t,F as x,E as v,G as u,H as c,A as g,y as d,n as y,q as b}from"./DLx_sSSf.js";import{_ as w}from"./DoQJh6nY.js";import{S as h}from"./tYk8DSAs.js";import"./ETKJmL_A.js";const k={class:"flex min-h-screen flex-1 flex-col justify-center px-6 py-12 bg-gradient-to-br via-secondary/40 from-accent/30 to-neutral"},S={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},_={class:"mt-2"},j={class:"mt-2"},C={key:0,class:"text-red-600 text-sm text-center"},T={__name:"login",setup(M){const a=l(""),n=l(""),o=l(""),m=y(),f=async()=>{if(o.value="",!a.value||!n.value){o.value="Por favor, completa todos los campos.";return}try{const s=await fetch(`${m.public.backendHost}/usuario/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({nombre_usuario:a.value,contrasenna:n.value})});if(!s.ok){const r=await s.json();o.value="Usuario o contraseña incorrectos.";return}const e=await s.json();e.token&&e.usuario?(localStorage.setItem("token",e.token),localStorage.setItem("usuario",JSON.stringify(e.usuario)),b("/")):o.value="Respuesta inesperada del servidor."}catch{o.value="Error de conexión con el servidor."}};return(s,e)=>(d(),i("div",k,[p(h,{title:"Iniciar Sesión - Contract Manager",description:"Accede a Contract Manager para gestionar contratos y entidades.",canonical:"/login"}),e[5]||(e[5]=t("div",{class:"sm:mx-auto sm:w-full sm:max-w-sm"},[t("img",{class:"mx-auto h-24 w-24 rounded-full shadow mt-8",src:w,alt:"Logo"}),t("h2",{class:"mt-8 text-center text-2xl font-bold tracking-tight text-gray-900"},"Inicia sesión en tu cuenta")],-1)),t("div",S,[t("form",{class:"space-y-6",onSubmit:x(f,["prevent"])},[t("div",null,[e[2]||(e[2]=t("label",{for:"username",class:"block text-sm font-medium text-gray-900"},"Nombre de usuario",-1)),t("div",_,[u(t("input",{id:"username",name:"username",type:"text",autocomplete:"username",required:"","onUpdate:modelValue":e[0]||(e[0]=r=>a.value=r),class:"block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-blue-600 sm:text-sm",placeholder:"Usuario"},null,512),[[c,a.value]])])]),t("div",null,[e[3]||(e[3]=t("div",{class:"flex items-center justify-between"},[t("label",{for:"password",class:"block text-sm font-medium text-gray-900"},"Contraseña")],-1)),t("div",j,[u(t("input",{id:"password",name:"password",type:"password",autocomplete:"current-password",required:"","onUpdate:modelValue":e[1]||(e[1]=r=>n.value=r),class:"block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-blue-600 sm:text-sm",placeholder:"Contraseña"},null,512),[[c,n.value]])])]),o.value?(d(),i("div",C,g(o.value),1)):v("",!0),e[4]||(e[4]=t("div",null,[t("button",{type:"submit",class:"flex w-full justify-center rounded-md bg-primary px-3 py-2 text-sm font-semibold text-neutral shadow hover:bg-primary/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary"}," Ingresar ")],-1))],32)])]))}};export{T as default};
