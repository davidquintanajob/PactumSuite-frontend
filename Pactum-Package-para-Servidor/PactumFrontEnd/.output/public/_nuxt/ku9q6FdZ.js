import{D as p}from"./B1U57Od_.js";import{r as l,o as y,q as u,n as v,x as f,B as m,z as e,A as n,I as h,y as d}from"./DLx_sSSf.js";import{N as w}from"./uqRIYar1.js";const k={class:"min-h-screen bg-gradient-to-br via-secondary/40 from-accent/30 to-neutral flex flex-col items-center py-12"},C={class:"bg-white rounded-xl shadow-lg p-8 w-full max-w-lg mt-8"},D={key:0,class:"space-y-4"},j={class:"flex flex-col gap-2"},I={class:"flex justify-between items-center"},N={class:"text-gray-900"},A={class:"flex justify-between items-center"},B={class:"text-gray-900"},O={class:"flex justify-between items-center"},P={class:"text-gray-900"},S={class:"flex justify-between items-center"},F={class:"text-gray-900"},z={class:"flex justify-between items-center"},E={class:"text-gray-900"},L={class:"flex justify-between items-center"},M={key:1,class:"text-center text-gray-500"},R={class:"bg-white rounded-xl shadow-lg p-8 w-full max-w-3xl mt-8"},J={__name:"perfil",setup(T){const x=v(),a=l(null),i=l([]),g=l(1),r=l(!1),b=[{key:"id_oferta",label:"ID Oferta"},{key:"descripcion",label:"DescripciÃ³n"},{key:"fecha_inicio",label:"Fecha Inicio",format:t=>t==null?void 0:t.substring(0,10)},{key:"fecha_fin",label:"Fecha Fin",format:t=>t==null?void 0:t.substring(0,10)},{key:"id_contrato",label:"ID Contrato"}];function _(t){g.value=t}return y(async()=>{r.value=!0;try{const t=localStorage.getItem("usuario");if(!t){u("/login");return}let s;try{s=JSON.parse(t)}catch{u("/login");return}if(!s||!s.id_usuario){u("/login");return}const c=await(await fetch(`${x.public.backendHost}/usuario/${s.id_usuario}`)).json();a.value=c,i.value=Array.isArray(c.oferta)?c.oferta.map(o=>({...o,fecha_inicio:o.fecha_inicio?o.fecha_inicio.substring(0,10):"",fecha_fin:o.fecha_fin?o.fecha_fin.substring(0,10):""})):[]}catch{a.value=null,i.value=[]}finally{r.value=!1}}),(t,s)=>(d(),f("div",k,[m(w),e("div",C,[s[6]||(s[6]=e("h2",{class:"text-2xl font-bold text-blue-700 mb-6 text-center"},"Mi Perfil",-1)),a.value?(d(),f("div",D,[e("div",j,[e("div",I,[s[0]||(s[0]=e("span",{class:"font-semibold text-gray-700"},"ID:",-1)),e("span",N,n(a.value.id_usuario),1)]),e("div",A,[s[1]||(s[1]=e("span",{class:"font-semibold text-gray-700"},"Nombre:",-1)),e("span",B,n(a.value.nombre),1)]),e("div",O,[s[2]||(s[2]=e("span",{class:"font-semibold text-gray-700"},"Usuario:",-1)),e("span",P,n(a.value.nombre_usuario),1)]),e("div",S,[s[3]||(s[3]=e("span",{class:"font-semibold text-gray-700"},"Cargo:",-1)),e("span",F,n(a.value.cargo),1)]),e("div",z,[s[4]||(s[4]=e("span",{class:"font-semibold text-gray-700"},"Rol:",-1)),e("span",E,n(a.value.rol),1)]),e("div",L,[s[5]||(s[5]=e("span",{class:"font-semibold text-gray-700"},"Estado:",-1)),e("span",{class:h([a.value.activo?"bg-success":"bg-danger","px-3 py-1 rounded-full text-neutral text-xs font-semibold"])},n(a.value.activo?"Activo":"Inactivo"),3)])])])):(d(),f("div",M,"Cargando datos..."))]),e("div",R,[s[7]||(s[7]=e("h3",{class:"text-xl font-semibold text-blue-700 mb-4"},"Ofertas del usuario",-1)),m(p,{columns:b,items:i.value,"total-items":i.value.length,"items-per-page":5,"current-page":g.value,"is-loading":r.value,"show-actions":!1,onPageChange:_},null,8,["items","total-items","current-page","is-loading"])])]))}};export{J as default};
